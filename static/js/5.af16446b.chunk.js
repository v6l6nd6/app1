(this["webpackJsonpmar-sn"]=this["webpackJsonpmar-sn"]||[]).push([[5],{298:function(e,t,n){e.exports={userPhoto:"users_userPhoto__1fmDA",selectPage:"users_selectPage__1JCyQ",PageOne:"users_PageOne__3GTh7",usersBlock:"users_usersBlock__2VfVZ",items_item:"users_items_item__1Z6R6",searchFormBlock:"users_searchFormBlock__1dXsH",paginationBlock:"users_paginationBlock__2FHUd"}},317:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(14),s=n(3),i=n(298),o=n.n(i),a=n(11),u=n(135),l=n(1),j=["curPerPortion"],d=function(e){for(var t=e.curPerPortion,n=void 0===t?5:t,c=Object(u.a)(e,j),s=Math.ceil(c.totalUsersCount/c.pageSize),i=[],d=1;d<=s;d++)i.push(d);var b=Math.ceil(c.totalUsersCount/n),f=Object(r.useState)(1),O=Object(a.a)(f,2),h=O[0],m=O[1],x=(h-1)*n+1,p=h*n;return Object(l.jsxs)("div",{className:o.a.paginationBlock,children:[x-1!==0?Object(l.jsx)("button",{onClick:function(){m(h-1)},children:"back"}):"",i.filter((function(e){return e>=x&&e<=p})).map((function(e){return Object(l.jsx)("span",{className:c.currentPage===e?o.a.selectPage:o.a.PageOne,onClick:function(){c.onPageChanged(e)},children:e})})),b>h?Object(l.jsx)("button",{onClick:function(){m(h+1)},children:"up"}):""]})},b=n(25),f=n(117),O=function(e){var t=e.user,n=e.followingInProgress,r=e.unfollowThunkCreator,c=e.followThunkCreator;return Object(l.jsxs)("div",{className:o.a.items_item,children:[Object(l.jsx)("span",{children:Object(l.jsx)("div",{children:Object(l.jsx)(b.b,{to:"/profile/"+t.id,children:Object(l.jsx)("img",{src:null!==t.photos.small?t.photos.small:f.a,className:o.a.userPhoto})})})}),Object(l.jsxs)("span",{children:[Object(l.jsxs)("span",{children:[Object(l.jsx)("div",{children:t.name}),Object(l.jsx)("div",{children:t.status})]}),Object(l.jsxs)("span",{children:[Object(l.jsx)("div",{children:t.id}),Object(l.jsx)("div",{children:t.status})]})]}),Object(l.jsx)("div",{children:t.followed?Object(l.jsx)("button",{disabled:n.some((function(e){return e===t.id})),onClick:function(){r(t.id)},children:"Unfollow"}):Object(l.jsx)("button",{disabled:n.some((function(e){return e===t.id})),onClick:function(){c(t.id)},children:"Follow"})})]})},h=n(59),m=n(93),x=n(316),p=Object(x.a)((function(e){return e.usersReducer.users}),(function(e){return e.filter((function(e){return!0}))})),g=function(e){return e.usersReducer.pageSize},v=function(e){return e.usersReducer.totalUsersCount},_=function(e){return e.usersReducer.currentPage},P=function(e){return e.usersReducer.ifFetchin},k=function(e){return e.usersReducer.followingInProgress},C=function(e){return e.usersReducer.filter},w=function(e){var t=Object(c.d)(C),n=m.a().shape({term:m.b().typeError("Must be string")});return Object(l.jsx)("div",{children:Object(l.jsx)(h.b,{enableReinitialize:!0,initialValues:{term:t.term,friend:String(t.friend)},onSubmit:function(t){e.onFilterSearch(t)},validationSchema:n,children:function(e){return Object(l.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(l.jsx)(h.a,{type:"text",placeholder:"search profile",name:"term",onChange:e.handleChange}),e.errors.term&&Object(l.jsx)("div",{children:e.errors.term}),Object(l.jsxs)(h.a,{name:"friend",as:"select",children:[Object(l.jsx)("option",{value:"true",children:"Followed"}),Object(l.jsx)("option",{value:"false",children:"Unfollowed"}),Object(l.jsx)("option",{value:"null",children:"All"})]}),Object(l.jsx)("button",{type:"submit",children:"Find"})]})}})})},F=n(106),S=n(4),B=function(e){var t=n(301),i=Object(S.g)(),a=Object(S.f)(),u=Object(c.c)(),j=Object(c.d)(v),b=Object(c.d)(_),f=Object(c.d)(g),h=Object(c.d)(p),m=Object(c.d)(C),x=Object(c.d)(k),P=function(e){u(Object(F.c)(e))},B=function(e){u(Object(F.e)(e))};return Object(r.useEffect)((function(){var e=t.parse(a.search);console.log(e);var n=b,r=m;e.page&&(n=Number(e.page)),e.term&&(r=Object(s.a)(Object(s.a)({},r),{},{term:e.term})),e.friend&&(r=Object(s.a)(Object(s.a)({},r),{},{friend:"null"===e.friend?null:"true"===e.friend})),u(Object(F.d)(n,f,r))}),[]),Object(r.useEffect)((function(){i({pathname:"/users",search:"?term=".concat(m.term,"&friend=").concat(m.friend,"&page=").concat(b)})}),[m,b]),Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:o.a.searchFormBlock,children:[Object(l.jsx)(w,{onFilterSearch:function(e){u(Object(F.d)(1,f,e))}}),Object(l.jsx)(d,{currentPage:b,totalUsersCount:j,pageSize:f,onPageChanged:function(e){u(F.a.setCurrentPageAC(e)),u(Object(F.d)(e,f,m))}})]}),Object(l.jsxs)("div",{className:o.a.usersBlock,children:[" ",h.map((function(e){return Object(l.jsx)(O,{user:e,followingInProgress:x,unfollowThunkCreator:B,followThunkCreator:P},e.id)}))]})]})},R=n(134);t.default=function(e){var t=Object(c.d)(P);return Object(l.jsxs)(l.Fragment,{children:[t?Object(l.jsx)(R.a,{}):null,Object(l.jsx)(B,{})]})}}}]);
//# sourceMappingURL=5.af16446b.chunk.js.map